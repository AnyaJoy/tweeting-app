(this["webpackJsonpsecond-react-project"]=this["webpackJsonpsecond-react-project"]||[]).push([[0],{50:function(e,t,c){},62:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(8),a=c.n(n),s=c(55),r=c.n(s),i=(c(62),c(14)),o=(c(50),c(40)),u=c(7);function l(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"loader1",children:[Object(u.jsx)("span",{}),Object(u.jsx)("span",{}),Object(u.jsx)("span",{}),Object(u.jsx)("span",{}),Object(u.jsx)("span",{})]})})}var j=c(41),d=c.n(j),p=a.a.createContext({}),b=c(28),m=(c(52),c(54),c(0)),O=c.n(m),h=c(2),f=b.a.initializeApp({apiKey:"AIzaSyBMjyU3LTizzmKymU0u5x_IDGBKVR2PDgw",authDomain:"react-project-2-anyajoy.firebaseapp.com",projectId:"react-project-2-anyajoy",storageBucket:"react-project-2-anyajoy.appspot.com",messagingSenderId:"571997512755",appId:"1:571997512755:web:48cbc30dbc1a0874f62f46",measurementId:"G-KZWMH65NEN"}),g=f.auth(),x=f.firestore(),v=new b.a.auth.GoogleAuthProvider,N=function(){var e=Object(h.a)(O.a.mark((function e(){var t,c,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.signInWithPopup(v);case 3:return t=e.sent,c=t.user,e.next=7,x.collection("users").where("uid","==",c.uid).get();case 7:if(0!==e.sent.docs.length){e.next=13;break}return n=new Date,a=d()(n).format("ddd DD MMM, HH:mm"),e.next=13,x.collection("users").doc(c.uid).set({uid:c.uid,name:c.displayName,authProvider:"google",email:c.email,dateCreated:a});case 13:console.log("signed in with google!"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(h.a)(O.a.mark((function e(t,c){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.signInWithEmailAndPassword(t,c);case 3:console.log("signed in!"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,c){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(O.a.mark((function e(t,c,n){var a,s,r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.createUserWithEmailAndPassword(c,n);case 3:return a=e.sent,s=a.user,r=new Date,i=d()(r).format("ddd DD MMM, HH:mm"),e.next=9,x.collection("users").doc(s.uid).set({uid:s.uid,name:t,authProvider:"local",email:c,dateCreated:i});case 9:console.log("registered!"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,c,n){return e.apply(this,arguments)}}(),S=function(){g.signOut(),console.log("logged out!")},y=c(32),I=c(17);function U(e){var t=Object(n.useContext)(p),c=Object(y.a)(g),a=Object(i.a)(c,2),s=a[0],r=a[1],j=Object(I.f)();function m(e){t.setIsLoading(!0);var c=new Date,n=d()(c).format("ddd DD MMM, HH:mm"),a=b.a.firestore.FieldValue.serverTimestamp;t.setInput(""),setTimeout((function(){""!==t.input&&(b.a.firestore().collection("tweets").add({content:t.input,userName:t.currentUser.name,date:n,createdAt:a()}).then((function(e){console.log("Added doc with ID: ",e.id)})),t.setIsLoading(!1))}),[500])}return Object(n.useEffect)((function(){r||(s&&(j.replace("/"),t.setCurrentUser(!0),b.a.firestore().collection("users").onSnapshot((function(e){var c=e.docs.map((function(e){return Object(o.a)({id:e.id},e.data())}));console.log(c);var n=c.filter((function(e){return e.id==s.uid}));console.log(n),t.setCurrentUser(n[0])}))),s||(j.replace("/login"),t.setCurrentUser(!1)))}),[s,r]),Object(n.useEffect)((function(){t.input?t.setIsInput(!0):t.setIsInput(!1)}),[t.input]),Object(n.useEffect)((function(){t.charNumber>140?(t.setCharNumberChecker(!0),t.setIsInput(!1)):t.setCharNumberChecker(!1)}),[t.charNumber]),Object(n.useEffect)((function(){b.a.firestore().collection("tweets").orderBy("createdAt").onSnapshot((function(e){var c=e.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})).reverse();t.setTweetStorage(c)}))}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"input-button-wrapper",children:[Object(u.jsx)("textarea",{onChange:function(e){t.setInput(e.target.value),t.setCharNumber(e.target.value.length)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),m())},className:"input",placeholder:"What you have in mind...",value:t.input}),t.isLoading?Object(u.jsx)(l,{}):Object(u.jsx)("button",{onClick:m,disabled:!t.isInput,className:"input-".concat(t.isInput),children:"Tweet"}),Object(u.jsx)("div",{className:"alert-".concat(!t.charNumberChecker),children:"The tweet can't contain more then 140 chars."})]})})}function A(){var e=Object(n.useContext)(p);return Object(u.jsx)(u.Fragment,{children:e.tweetStorage.map((function(e,t){return Object(u.jsxs)("div",{className:"tweet-wrapper",children:[Object(u.jsxs)("div",{className:"user-name-and-date",children:[Object(u.jsx)("div",{className:"user-name",children:e.userName}),Object(u.jsx)("div",{className:"date",children:e.date})]}),Object(u.jsx)("div",{className:"tweet",children:e.content})]},e.id+t)}))})}b.a.initializeApp({apiKey:"AIzaSyBMjyU3LTizzmKymU0u5x_IDGBKVR2PDgw",authDomain:"react-project-2-anyajoy.firebaseapp.com",projectId:"react-project-2-anyajoy",storageBucket:"react-project-2-anyajoy.appspot.com",messagingSenderId:"571997512755",appId:"1:571997512755:web:48cbc30dbc1a0874f62f46",measurementId:"G-KZWMH65NEN"});var k=function(){return Object(n.useContext)(p),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(U,{}),Object(u.jsx)("div",{className:"tweets-wrapper",children:Object(u.jsx)(A,{})})]})})};var D=c(37),P=c.p+"static/media/tweet.138b90f2.png",E={apiKey:"AIzaSyBMjyU3LTizzmKymU0u5x_IDGBKVR2PDgw",authDomain:"react-project-2-anyajoy.firebaseapp.com",projectId:"react-project-2-anyajoy",storageBucket:"react-project-2-anyajoy.appspot.com",messagingSenderId:"571997512755",appId:"1:571997512755:web:48cbc30dbc1a0874f62f46",measurementId:"G-KZWMH65NEN"};function L(){var e=Object(n.useContext)(p),t=b.a.initializeApp(E),c=t.auth(),a=t.firestore(),s=Object(y.a)(c),r=Object(i.a)(s,2),l=r[0],j=r[1],d=Object(I.f)();Object(n.useEffect)((function(){j||(l&&(d.replace("/profile"),e.setCurrentUser(l),b.a.firestore().collection("users").onSnapshot((function(t){var c=t.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})).filter((function(e){return e.id==l.uid}));e.setCurrentUser(c[0])}))),l||(d.replace("/login"),e.setCurrentUser(!1)))}),[l,j]),Object(n.useEffect)((function(){C(e.currentUser.photoUrl)}),[e.currentUser]);var m=Object(n.useState)(),O=Object(i.a)(m,2),h=O[0],f=O[1],g=Object(D.b)(),x=Object(D.c)(g,e.currentUser.uid),v=Object(n.useState)(),N=Object(i.a)(v,2),w=N[0],C=N[1],S=Object(n.useState)(!1),U=Object(i.a)(S,2),A=U[0],k=U[1];Object(n.useEffect)((function(){h&&(console.log("start of upload"),Object(D.d)(x,h).then((function(e){console.log("Uploaded a blob or file!")})),Object(D.a)(x).then((function(t){console.log(t),C(t),setTimeout((function(){k(!0)}),[1e3]),a.collection("users").doc(e.currentUser.uid).update({photoUrl:t}),setTimeout((function(){k(!1)}),[5e3])})))}),[h]);return Object(u.jsxs)("div",{className:"profile-wrapper",children:[Object(u.jsx)("div",{className:"header-profile",children:"Profile"}),Object(u.jsxs)("div",{className:"profile-and-picture-wrapper",children:[Object(u.jsxs)("div",{className:"profile-info",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:"User name: "}),Object(u.jsx)("span",{className:"profile-info-fetched",children:e.currentUser.name})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"profile-email",children:"E-mail: "}),Object(u.jsx)("span",{className:"profile-info-fetched",children:e.currentUser.email})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"profile-createdAt",children:"Created at: "}),Object(u.jsx)("span",{className:"profile-info-fetched",children:e.currentUser.dateCreated})]})]}),Object(u.jsxs)("div",{className:"photo-wrapper",children:[Object(u.jsx)("div",{className:"profile-picture",children:w?Object(u.jsx)("img",{src:w}):Object(u.jsx)("img",{src:P})}),Object(u.jsxs)("div",{className:"update-picture-button",children:["Update photo",Object(u.jsx)("input",{type:"file",className:"upload-photo",name:"photo",onChange:function(e){var t=e.target.files[0];f(t)}})]}),Object(u.jsx)("div",{className:"notification-submit-".concat(A),children:"Saved! Reload the page for update."})]})]})]})}var M=c(27);function H(){var e=Object(n.useContext)(p),t="",c=Object(I.g)();Object(n.useEffect)((function(){"/"===c.pathname&&(e.setHomeActive(!0),e.setProfileActive(!1)),"/profile"===c.pathname&&(e.setHomeActive(!1),e.setProfileActive(!0))}),[e.currentUser]);return Object(u.jsx)("div",{className:"nav-bar",onClick:function(){"home"===t&&(e.setHomeActive(!0),e.setProfileActive(!1)),"profile"===t&&(e.setHomeActive(!1),e.setProfileActive(!0))},children:e.currentUser?Object(u.jsxs)("span",{children:[Object(u.jsx)(M.b,{to:"/",onClick:function(){t="home"},className:"home-".concat(e.homeActive),children:"Home"}),Object(u.jsx)(M.b,{to:"/profile",onClick:function(){t="profile"},className:"profile-".concat(e.profileActive),children:"Profile"}),Object(u.jsx)("span",{onClick:S,className:"logout",children:"Logout [\u279c"})]}):Object(u.jsx)(M.b,{to:"/login",className:"login-true",children:"Login \u279c]"})})}function K(){var e=Object(n.useContext)(p),t=Object(n.useState)(""),c=Object(i.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),j=o[0],d=o[1],b=Object(y.a)(g),m=Object(i.a)(b,3),O=m[0],h=m[1],f=(m[2],Object(I.f)());Object(n.useEffect)((function(){console.log("running!"),h||(O&&(f.replace("/"),e.setCurrentUser(O)),O||(f.replace("/login"),e.setCurrentUser(!1)))}),[O,h]);return Object(u.jsxs)("div",{className:"login-wrapper",children:[Object(u.jsx)("span",{className:"header-login",children:"Login"}),Object(u.jsxs)("span",{className:"signup-wrapper",children:[Object(u.jsx)("span",{className:"header-signup",children:"First time here? - "}),Object(u.jsx)("span",{children:Object(u.jsx)(M.b,{to:"/signup",className:"header-signup-link",children:"Sign Up"})})]}),Object(u.jsx)("div",{className:"user-name-description",children:"E-mail"}),Object(u.jsx)("input",{className:"user-name-input",placeholder:"best-alex-ever@mail.com",value:a,onChange:function(e){return s(e.target.value)}}),Object(u.jsx)("div",{className:"user-name-description",children:"Password"}),Object(u.jsx)("input",{type:"password",className:"user-name-input",placeholder:"********",onChange:function(e){return d(e.target.value)},value:j}),e.isLoading?Object(u.jsx)(l,{}):Object(u.jsxs)("div",{className:"login-buttons",children:[Object(u.jsx)("button",{onClick:function(){!function(t,c){w(t,c),e.setCurrentUser("true"),e.setRedirect("/")}(a,j)},disabled:!1,className:"login-button-".concat(!0),children:"Log in"}),Object(u.jsx)("button",{onClick:N,className:"login-button-google",children:"Login with Google"})]})]})}function T(){var e=Object(n.useContext)(p),t=Object(n.useState)(""),c=Object(i.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),j=o[0],d=o[1],b=Object(n.useState)(""),m=Object(i.a)(b,2),O=m[0],h=m[1],f=Object(y.a)(g),x=Object(i.a)(f,3),v=x[0],w=x[1],S=(x[2],Object(I.f)());Object(n.useEffect)((function(){console.log("running!"),w||(v&&(S.replace("/"),e.setCurrentUser(v)),v||e.setCurrentUser(!1))}),[v,w]);return Object(u.jsxs)("div",{className:"login-wrapper",children:[Object(u.jsx)("span",{className:"header-login",children:"Sign Up"}),Object(u.jsxs)("span",{className:"signup-wrapper",children:[Object(u.jsx)("span",{className:"header-signup",children:"Already signed-up? - "}),Object(u.jsx)("span",{children:Object(u.jsx)(M.b,{to:"/login",className:"header-signup-link",children:"Login"})})]}),Object(u.jsx)("div",{className:"user-name-description",children:"Name"}),Object(u.jsx)("input",{className:"user-name-input",placeholder:"Alex",value:O,onChange:function(e){return h(e.target.value)}}),Object(u.jsx)("div",{className:"user-name-description",children:"E-mail"}),Object(u.jsx)("input",{className:"user-name-input",placeholder:"best-alex-ever@mail.com",value:e.email,onChange:function(e){return s(e.target.value)}}),Object(u.jsx)("div",{className:"user-name-description",children:"Password"}),Object(u.jsx)("input",{type:"password",className:"user-name-input",placeholder:"********",value:e.password,onChange:function(e){return d(e.target.value)}}),e.isLoading?Object(u.jsx)(l,{}):Object(u.jsxs)("div",{className:"signup-buttons",children:[Object(u.jsx)("button",{onClick:function(){O||alert("Please enter name"),C(O,a,j)},disabled:!1,className:"signup-button-".concat(!0),children:"Sign Up"}),Object(u.jsx)("button",{className:"signup-button-google",onClick:N,children:"Sign up with Google"})]})]})}var z=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!0),r=Object(i.a)(s,2),o=r[0],l=r[1],j=Object(n.useState)(!1),d=Object(i.a)(j,2),b=d[0],m=d[1],O=Object(n.useState)(!1),h=Object(i.a)(O,2),f=h[0],g=h[1],x=Object(n.useState)(),v=Object(i.a)(x,2),N=v[0],w=v[1],C=Object(n.useState)(!1),S=Object(i.a)(C,2),y=S[0],U=S[1],A=Object(n.useState)(!1),D=Object(i.a)(A,2),P=D[0],E=D[1],z=Object(n.useState)(),B=Object(i.a)(z,2),F=B[0],G=B[1],W=Object(n.useState)(!1),R=Object(i.a)(W,2),V=R[0],Z=R[1],_=Object(n.useState)(!1),J=Object(i.a)(_,2),q=J[0],Q=J[1],X=Object(n.useState)([]),Y=Object(i.a)(X,2),$=Y[0],ee=Y[1],te=Object(n.useState)(""),ce=Object(i.a)(te,2),ne=ce[0],ae=ce[1],se=Object(n.useState)(),re=Object(i.a)(se,2),ie=re[0],oe=re[1],ue=Object(n.useState)({}),le=Object(i.a)(ue,2),je=le[0],de=le[1];return Object(n.useEffect)((function(){console.log(je.name)}),[je]),Object(u.jsx)(p.Provider,{value:{serverData:c,setServerData:a,isInput:P,setIsInput:E,input:F,setInput:G,charNumber:N,setCharNumber:w,charNumberChecker:y,setCharNumberChecker:U,isLoading:V,setIsLoading:Z,homeActive:o,setHomeActive:l,profileActive:b,setProfileActive:m,loginActive:f,setLoginActive:g,isSubmit:q,setIsSubmit:Q,tweetStorage:$,setTweetStorage:ee,location:ne,setLocation:ae,redirect:ie,setRedirect:oe,currentUser:je,setCurrentUser:de},children:Object(u.jsx)("div",{className:"content-wrapper",children:Object(u.jsxs)(M.a,{children:[ie&&Object(u.jsx)(I.a,{to:ie}),Object(u.jsx)(H,{}),Object(u.jsx)(I.b,{exact:!0,path:"/",component:k}),Object(u.jsx)(I.b,{exact:!0,path:"/profile",component:L}),Object(u.jsx)(I.b,{exact:!0,path:"/login",component:K}),Object(u.jsx)(I.b,{exact:!0,path:"/signup",component:T})]})})})},B=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,73)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(z,{})}),document.getElementById("root")),B()}},[[72,1,2]]]);
//# sourceMappingURL=main.bd2ceef1.chunk.js.map